import{p as x,g as X,c as b,a as I,D as p,a9 as O,aa as ee,ab as te,ac as ne,E as S,m as U,e as E,j as D,b as l,_ as re,B as q,Y as ae,Z as se,S as A,t as ie,k as le,K as k,G as oe,w as N,ad as ue,Q as ce,q as de,V as $,ae as ge,F as ve,af as me}from"./index-D3j4iZgd.js";const we=(e,r)=>{const n=e.__vccOpts||e;for(const[t,s]of r)n[t]=s;return n},fe=x({rounded:{type:[Boolean,Number,String],default:void 0},tile:Boolean},"rounded");function he(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:X();return{roundedClasses:b(()=>{const t=I(e)?e.value:e.rounded,s=I(e)?e.value:e.tile,u=[];if(t===!0||t==="")u.push(`${r}--rounded`);else if(typeof t=="string"||t===0)for(const v of String(t).split(" "))u.push(`rounded-${v}`);else(s||t===!1)&&u.push("rounded-0");return u})}}function M(e){return p(()=>{const r=[],n={};if(e.value.background)if(O(e.value.background)){if(n.backgroundColor=e.value.background,!e.value.text&&ee(e.value.background)){const t=te(e.value.background);if(t.a==null||t.a===1){const s=ne(t);n.color=s,n.caretColor=s}}}else r.push(`bg-${e.value.background}`);return e.value.text&&(O(e.value.text)?(n.color=e.value.text,n.caretColor=e.value.text):r.push(`text-${e.value.text}`)),{colorClasses:r,colorStyles:n}})}function ze(e,r){const n=b(()=>({text:I(e)?e.value:null})),{colorClasses:t,colorStyles:s}=M(n);return{textColorClasses:t,textColorStyles:s}}function be(e,r){const n=b(()=>({background:I(e)?e.value:null})),{colorClasses:t,colorStyles:s}=M(n);return{backgroundColorClasses:t,backgroundColorStyles:s}}const Se=x({height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},"dimension");function ye(e){return{dimensionStyles:b(()=>{const n={},t=S(e.height),s=S(e.maxHeight),u=S(e.maxWidth),v=S(e.minHeight),d=S(e.minWidth),f=S(e.width);return t!=null&&(n.height=t),s!=null&&(n.maxHeight=s),u!=null&&(n.maxWidth=u),v!=null&&(n.minHeight=v),d!=null&&(n.minWidth=d),f!=null&&(n.width=f),n})}}function _e(e){return{aspectStyles:b(()=>{const r=Number(e.aspectRatio);return r?{paddingBottom:String(1/r*100)+"%"}:void 0})}}const G=x({aspectRatio:[String,Number],contentClass:null,inline:Boolean,...U(),...Se()},"VResponsive"),F=E()({name:"VResponsive",props:G(),setup(e,r){let{slots:n}=r;const{aspectStyles:t}=_e(e),{dimensionStyles:s}=ye(e);return D(()=>{var u;return l("div",{class:["v-responsive",{"v-responsive--inline":e.inline},e.class],style:[s.value,e.style]},[l("div",{class:"v-responsive__sizer",style:t.value},null),(u=n.additional)==null?void 0:u.call(n),n.default&&l("div",{class:["v-responsive__content",e.contentClass]},[n.default()])])}),{}}}),Ce=x({transition:{type:[Boolean,String,Object],default:"fade-transition",validator:e=>e!==!0}},"transition"),R=(e,r)=>{let{slots:n}=r;const{transition:t,disabled:s,group:u,...v}=e,{component:d=u?ae:se,...f}=typeof t=="object"?t:{};return re(d,q(typeof t=="string"?{name:s?"":t}:f,typeof t=="string"?{}:Object.fromEntries(Object.entries({disabled:s,group:u}).filter(i=>{let[o,m]=i;return m!==void 0})),v),n)};function ke(e,r){if(!A)return;const n=r.modifiers||{},t=r.value,{handler:s,options:u}=typeof t=="object"?t:{handler:t,options:{}},v=new IntersectionObserver(function(){var m;let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],f=arguments.length>1?arguments[1]:void 0;const i=(m=e._observe)==null?void 0:m[r.instance.$.uid];if(!i)return;const o=d.some(y=>y.isIntersecting);s&&(!n.quiet||i.init)&&(!n.once||o||i.init)&&s(o,d,f),o&&n.once?L(e,r):i.init=!0},u);e._observe=Object(e._observe),e._observe[r.instance.$.uid]={init:!1,observer:v},v.observe(e)}function L(e,r){var t;const n=(t=e._observe)==null?void 0:t[r.instance.$.uid];n&&(n.observer.unobserve(e),delete e._observe[r.instance.$.uid])}const xe={mounted:ke,unmounted:L},Re=x({absolute:Boolean,alt:String,cover:Boolean,color:String,draggable:{type:[Boolean,String],default:void 0},eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},crossorigin:String,referrerpolicy:String,srcset:String,position:String,...G(),...U(),...fe(),...Ce()},"VImg"),Ne=E()({name:"VImg",directives:{intersect:xe},props:Re(),emits:{loadstart:e=>!0,load:e=>!0,error:e=>!0},setup(e,r){let{emit:n,slots:t}=r;const{backgroundColorClasses:s,backgroundColorStyles:u}=be(ie(e,"color")),{roundedClasses:v}=he(e),d=le("VImg"),f=k(""),i=oe(),o=k(e.eager?"loading":"idle"),m=k(),y=k(),g=b(()=>e.src&&typeof e.src=="object"?{src:e.src.src,srcset:e.srcset||e.src.srcset,lazySrc:e.lazySrc||e.src.lazySrc,aspect:Number(e.aspectRatio||e.src.aspect||0)}:{src:e.src,srcset:e.srcset,lazySrc:e.lazySrc,aspect:Number(e.aspectRatio||0)}),_=b(()=>g.value.aspect||m.value/y.value||0);N(()=>e.src,()=>{w(o.value!=="idle")}),N(_,(a,c)=>{!a&&c&&i.value&&C(i.value)}),ue(()=>w());function w(a){if(!(e.eager&&a)&&!(A&&!a&&!e.eager)){if(o.value="loading",g.value.lazySrc){const c=new Image;c.src=g.value.lazySrc,C(c,null)}g.value.src&&ce(()=>{var c;n("loadstart",((c=i.value)==null?void 0:c.currentSrc)||g.value.src),setTimeout(()=>{var h;if(!d.isUnmounted)if((h=i.value)!=null&&h.complete){if(i.value.naturalWidth||B(),o.value==="error")return;_.value||C(i.value,null),o.value==="loading"&&P()}else _.value||C(i.value),T()})})}}function P(){var a;d.isUnmounted||(T(),C(i.value),o.value="loaded",n("load",((a=i.value)==null?void 0:a.currentSrc)||g.value.src))}function B(){var a;d.isUnmounted||(o.value="error",n("error",((a=i.value)==null?void 0:a.currentSrc)||g.value.src))}function T(){const a=i.value;a&&(f.value=a.currentSrc||a.src)}let z=-1;de(()=>{clearTimeout(z)});function C(a){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;const h=()=>{if(clearTimeout(z),d.isUnmounted)return;const{naturalHeight:V,naturalWidth:H}=a;V||H?(m.value=H,y.value=V):!a.complete&&o.value==="loading"&&c!=null?z=window.setTimeout(h,c):(a.currentSrc.endsWith(".svg")||a.currentSrc.startsWith("data:image/svg+xml"))&&(m.value=1,y.value=1)};h()}const W=b(()=>({"v-img__img--cover":e.cover,"v-img__img--contain":!e.cover})),K=()=>{var h;if(!g.value.src||o.value==="idle")return null;const a=l("img",{class:["v-img__img",W.value],style:{objectPosition:e.position},src:g.value.src,srcset:g.value.srcset,alt:e.alt,crossorigin:e.crossorigin,referrerpolicy:e.referrerpolicy,draggable:e.draggable,sizes:e.sizes,ref:i,onLoad:P,onError:B},null),c=(h=t.sources)==null?void 0:h.call(t);return l(R,{transition:e.transition,appear:!0},{default:()=>[$(c?l("picture",{class:"v-img__picture"},[c,a]):a,[[me,o.value==="loaded"]])]})},Q=()=>l(R,{transition:e.transition},{default:()=>[g.value.lazySrc&&o.value!=="loaded"&&l("img",{class:["v-img__img","v-img__img--preload",W.value],style:{objectPosition:e.position},src:g.value.lazySrc,alt:e.alt,crossorigin:e.crossorigin,referrerpolicy:e.referrerpolicy,draggable:e.draggable},null)]}),Y=()=>t.placeholder?l(R,{transition:e.transition,appear:!0},{default:()=>[(o.value==="loading"||o.value==="error"&&!t.error)&&l("div",{class:"v-img__placeholder"},[t.placeholder()])]}):null,Z=()=>t.error?l(R,{transition:e.transition,appear:!0},{default:()=>[o.value==="error"&&l("div",{class:"v-img__error"},[t.error()])]}):null,J=()=>e.gradient?l("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${e.gradient})`}},null):null,j=k(!1);{const a=N(_,c=>{c&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{j.value=!0})}),a())})}return D(()=>{const a=F.filterProps(e);return $(l(F,q({class:["v-img",{"v-img--absolute":e.absolute,"v-img--booting":!j.value},s.value,v.value,e.class],style:[{width:S(e.width==="auto"?m.value:e.width)},u.value,e.style]},a,{aspectRatio:_.value,"aria-label":e.alt,role:e.alt?"img":void 0}),{additional:()=>l(ve,null,[l(K,null,null),l(Q,null,null),l(J,null,null),l(Y,null,null),l(Z,null,null)]),default:t.default}),[[ge("intersect"),{handler:w,options:e.options},null,{once:!0}]])}),{currentSrc:f,image:i,state:o,naturalWidth:m,naturalHeight:y}}});export{xe as I,Ne as V,we as _,he as a,ze as b,Se as c,ye as d,be as e,fe as m,M as u};
